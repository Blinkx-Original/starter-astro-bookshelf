---
import Layout from "../layouts/Layout.astro";
import { getAllBooks } from "../lib/contentful";
const books = await getAllBooks();
---

<Layout title="Astrobrary">
  <h1 class="text-6xl text-center">Astrobrary üöÄ</h1>

  {books.length === 0 ? (
    <p style="text-align:center;margin-top:2rem">
      No hay items a√∫n o la colecci√≥n no coincide.
      Crea al menos 1 ‚ÄúBook Reference Page‚Äù publicado en <code>master</code>
      (API ID: <code>bookReferencePage</code>) y vuelve a desplegar.
    </p>
  ) : (
    <section class="container mx-auto mt-6">
      <ul class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6">
        {books.map((book) => (
          <li>
            <a href={`/books/${book.sys.id}`} class="group">
              <div class="aspect-[4/5] overflow-hidden rounded bg-gray-200">
                <img src={book.coverImage?.url} class="w-full h-full object-cover group-hover:opacity-80" />
              </div>
              <p class="mt-2">{book.title}</p>
            </a>
          </li>
        ))}
      </ul>
    </section>
  )}
</Layout>
